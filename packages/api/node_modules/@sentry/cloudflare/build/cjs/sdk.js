var {
  _nullishCoalesce
} = require('@sentry/core');

Object.defineProperty(exports, '__esModule', { value: true });

const core = require('@sentry/core');
const client = require('./client.js');
const fetch = require('./integrations/fetch.js');
const transport = require('./transport.js');
const stacktrace = require('./vendor/stacktrace.js');

/** Get the default integrations for the Cloudflare SDK. */
function getDefaultIntegrations(options) {
  const sendDefaultPii = _nullishCoalesce(options.sendDefaultPii, () => ( false));
  return [
    core.dedupeIntegration(),
    core.inboundFiltersIntegration(),
    core.functionToStringIntegration(),
    core.linkedErrorsIntegration(),
    fetch.fetchIntegration(),
    core.requestDataIntegration(sendDefaultPii ? undefined : { include: { cookies: false } }),
  ];
}

/**
 * Initializes the cloudflare SDK.
 */
function init(options) {
  if (options.defaultIntegrations === undefined) {
    options.defaultIntegrations = getDefaultIntegrations(options);
  }

  const clientOptions = {
    ...options,
    stackParser: core.stackParserFromStackParserOptions(options.stackParser || stacktrace.defaultStackParser),
    integrations: core.getIntegrationsToSetup(options),
    transport: options.transport || transport.makeCloudflareTransport,
  };

  return core.initAndBind(client.CloudflareClient, clientOptions) ;
}

exports.getDefaultIntegrations = getDefaultIntegrations;
exports.init = init;
//# sourceMappingURL=sdk.js.map
